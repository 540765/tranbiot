# Changesets

Hello and welcome! This folder has been automatically generated by `@changesets/cli`, a build tool that works
with multi-package repos, or single-package repos to help you version and publish your code. You can
find the full documentation for it [in our repository](https://github.com/changesets/changesets)

We have a quick list of common questions to get you started engaging with this project in
[our documentation](https://github.com/changesets/changesets/blob/main/docs/common-questions.md)

# Changesets配置文件介绍

```json
{
  "$schema": "https://unpkg.com/@changesets/config@2.3.0/schema.json",
  /**
  * changelog 生成方式
  *  开源项目可用 github 格式的 changelog，会附带 commit link
  *  "changelog": ["@changesets/changelog-github", { "repo": "changesets/*  changesets" }]
  */
  "changelog": "@changesets/cli/changelog",
  /*不要让 changeset 在 publish 的时候帮我们做 git add*/
  "commit": false,
  "fixed": [],
  // 配置哪些包要共享版本
  // 参考1：https://github.com/changesets/changesets/blob/main/docs/config-file-options.md#linked-array-of-arrays-of-package-names
  // 参考2：https://github.com/changesets/changesets/blob/main/docs/linked-packages.md#using-glob-expressions
  "linked": [],
  // 公私有安全设定，内网建议 restricted ，开源使用 public
  "access": "restricted",
  // 项目主分支
  "baseBranch": "main",
  // 确保某包依赖的包发生 upgrade，该包也要发生 version upgrade 的衡量单位（量级）
  // https://github.com/changesets/changesets/blob/main/docs/config-file-options.md#updateinternaldependencies
  "updateInternalDependencies": "patch",
  // 不需要变动 version 的包
  "ignore": []
   // 在每次 version 变动时一定无理由 patch 抬升依赖他的那些包的版本，防止陷入 major 优先的未更新问题
//   "___experimentalUnsafeOptions_WILL_CHANGE_IN_PATCH": {
//     // https://github.com/changesets/changesets/blob/c68536edf4c04e7fdf5594ec9c69471cd86fd0ce/packages/assemble-release-plan/src/determine-dependents.ts#L88
//     "updateInternalDependents": "always"
//   }
}
```

# 与之对应的命令

```json
// package.json

// 新增
"scripts": {
    // 构建整个项目的产物
  	"build": "pnpm -r --filter ./packages run build",
    
    // 1. 开始交互式填写变更集
    "changeset": "changeset",
      
    // 2. 用来统一提升版本号
    "version-packages": "changeset version",
     
    // 3. 构建产物后发版
    "release": "pnpm build && pnpm release:only",
    // ⬇️ 配置公司源
    "release:only": "changeset publish --registry=https://registry.npmjs.com/"
}

// 新增
"publishConfig": {
  "access": "public"
}
```
